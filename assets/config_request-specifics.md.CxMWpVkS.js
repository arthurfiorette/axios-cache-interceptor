import{_ as t,C as n,c as h,o as l,ag as i,G as e}from"./chunks/framework.CnuuF8_c.js";const p="/assets/disk-cache-screenshot.DCgmRbJn.png",y=JSON.parse('{"title":"Request specifics","description":"","frontmatter":{},"headers":[],"relativePath":"config/request-specifics.md","filePath":"config/request-specifics.md","lastUpdated":1765217678000}'),k={name:"config/request-specifics.md"};function r(d,s,o,c,C,A){const a=n("Badge");return l(),h("div",null,[s[0]||(s[0]=i('<div style="display:none;" hidden="true" aria-hidden="true">Are you an LLM? You can read better optimized documentation at /config/request-specifics.md for this page in Markdown format</div><h1 id="request-specifics" tabindex="-1">Request specifics <a class="header-anchor" href="#request-specifics" aria-label="Permalink to &quot;Request specifics&quot;">​</a></h1><p>Each request can have its own cache customization, by using the <code>cache</code> property. This way, you can have requests behaving differently from each other without much effort.</p><p>The inline documentation is self explanatory, but here is a shortly brief of what each property does:</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>You can override every request specific property when creating the cached axios client, the same way you do with the <a href="./../config">global options</a>.</p></div><h2 id="id" tabindex="-1">id <a class="header-anchor" href="#id" aria-label="Permalink to &quot;id&quot;">​</a></h2>',6)),e(a,{text:"optional",type:"warning"}),s[1]||(s[1]=i('<ul><li>Type: <code>string</code></li><li>default: <em>(auto generated by the current <a href="./../guide/request-id#custom-generator">key generator</a>)</em></li></ul><p>The <a href="./../guide/request-id">Request ID</a> used in this request.</p><p>It may have been generated by the <a href="./../guide/request-id#custom-generator">Key Generator</a> or a custom one provided by <a href="./request-specifics#id"><code>config.id</code></a></p><h2 id="cache" tabindex="-1">cache <a class="header-anchor" href="#cache" aria-label="Permalink to &quot;cache&quot;">​</a></h2>',4)),e(a,{text:"optional",type:"warning"}),s[2]||(s[2]=i(`<ul><li>Type: <code>Partial&lt;CacheProperties&lt;R, D&gt;&gt;</code>.</li><li>Default: <code>{}</code> <em>(Inherits from global configuration)</em></li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>As this property is optional, when not provided, all properties will inherit from global configuration</p></div><p>The cache option available through the request config is where all the cache customization happens.</p><p>You can pass an object with cache properties to customize cache behavior.</p><p>To disable caching for a specific request, use <code>cache: { enabled: false }</code>:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes kanagawa-wave kanagawa-lotus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#727169;--shiki-light:#716E61;">// Make a request with cache disabled</span></span>
<span class="line"><span style="--shiki-dark:#957FB8;--shiki-light:#624C83;">const</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> {</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> id</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">:</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> requestId </span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">}</span><span style="--shiki-dark:#E6C384;--shiki-light:#77713F;"> =</span><span style="--shiki-dark:#957FB8;--shiki-dark-font-weight:bold;--shiki-light:#624C83;--shiki-light-font-weight:bold;"> await</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> axios</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">.</span><span style="--shiki-dark:#7E9CD8;--shiki-light:#4D699B;">get</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">(</span><span style="--shiki-dark:#98BB6C;--shiki-light:#6F894E;">&#39;url&#39;</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">,</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> {</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> cache</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">:</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> {</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> enabled</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">:</span><span style="--shiki-dark:#FFA066;--shiki-light:#CC6D00;"> false</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> }</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#727169;--shiki-light:#716E61;">// Delete the cache entry for this request if needed</span></span>
<span class="line"><span style="--shiki-dark:#957FB8;--shiki-dark-font-weight:bold;--shiki-light:#624C83;--shiki-light-font-weight:bold;">await</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> axios</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">.</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">storage</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">.</span><span style="--shiki-dark:#7E9CD8;--shiki-light:#4D699B;">remove</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">(</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">requestId</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">);</span></span></code></pre></div><h2 id="cache-enabled" tabindex="-1">cache.enabled <a class="header-anchor" href="#cache-enabled" aria-label="Permalink to &quot;cache.enabled&quot;">​</a></h2>`,7)),e(a,{text:"optional",type:"warning"}),s[3]||(s[3]=i(`<ul><li>Type: <code>boolean</code></li><li>Default: <code>true</code></li></ul><p>Whether the cache is enabled for this request.</p><p>When set to <code>false</code>, the cache will be completely disabled for this request.</p><p>This is useful for <strong>opt-in cache</strong> scenarios where you want to disable cache globally but enable it for specific requests.</p><h3 id="example-opt-in-cache-pattern" tabindex="-1">Example: Opt-in Cache Pattern <a class="header-anchor" href="#example-opt-in-cache-pattern" aria-label="Permalink to &quot;Example: Opt-in Cache Pattern&quot;">​</a></h3><p>You can disable cache by default and enable it only for specific endpoints:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes kanagawa-wave kanagawa-lotus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#FFA066;--shiki-light:#CC6D00;">import </span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">{</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> setupCache</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> }</span><span style="--shiki-dark:#957FB8;--shiki-light:#624C83;"> from</span><span style="--shiki-dark:#98BB6C;--shiki-light:#6F894E;"> &#39;axios-cache-interceptor&#39;</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#727169;--shiki-light:#716E61;">// Setup axios with cache disabled by default</span></span>
<span class="line"><span style="--shiki-dark:#957FB8;--shiki-light:#624C83;">const</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> axios </span><span style="--shiki-dark:#E6C384;--shiki-light:#77713F;">=</span><span style="--shiki-dark:#7E9CD8;--shiki-light:#4D699B;"> setupCache</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">(</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">axiosInstance</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">,</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> {</span></span>
<span class="line"><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">  enabled</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">:</span><span style="--shiki-dark:#FFA066;--shiki-light:#CC6D00;"> false</span><span style="--shiki-dark:#727169;--shiki-light:#716E61;"> // Disable cache globally</span></span>
<span class="line"><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#727169;--shiki-light:#716E61;">// Most requests won&#39;t use cache</span></span>
<span class="line"><span style="--shiki-dark:#957FB8;--shiki-dark-font-weight:bold;--shiki-light:#624C83;--shiki-light-font-weight:bold;">await</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> axios</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">.</span><span style="--shiki-dark:#7E9CD8;--shiki-light:#4D699B;">get</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">(</span><span style="--shiki-dark:#98BB6C;--shiki-light:#6F894E;">&#39;/api/realtime-data&#39;</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">);</span><span style="--shiki-dark:#727169;--shiki-light:#716E61;"> // Not cached</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#727169;--shiki-light:#716E61;">// Enable cache for specific heavy/expensive requests</span></span>
<span class="line"><span style="--shiki-dark:#957FB8;--shiki-dark-font-weight:bold;--shiki-light:#624C83;--shiki-light-font-weight:bold;">await</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> axios</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">.</span><span style="--shiki-dark:#7E9CD8;--shiki-light:#4D699B;">get</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">(</span><span style="--shiki-dark:#98BB6C;--shiki-light:#6F894E;">&#39;/api/heavy-computation&#39;</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">,</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> {</span></span>
<span class="line"><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">  cache</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">:</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> {</span></span>
<span class="line"><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">    enabled</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">:</span><span style="--shiki-dark:#FFA066;--shiki-light:#CC6D00;"> true</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">,</span></span>
<span class="line"><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">    ttl</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">:</span><span style="--shiki-dark:#D27E99;--shiki-light:#B35B79;"> 1000</span><span style="--shiki-dark:#E6C384;--shiki-light:#77713F;"> *</span><span style="--shiki-dark:#D27E99;--shiki-light:#B35B79;"> 60</span><span style="--shiki-dark:#E6C384;--shiki-light:#77713F;"> *</span><span style="--shiki-dark:#D27E99;--shiki-light:#B35B79;"> 10</span><span style="--shiki-dark:#727169;--shiki-light:#716E61;"> // Cache for 10 minutes</span></span>
<span class="line"><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">  }</span></span>
<span class="line"><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">});</span><span style="--shiki-dark:#727169;--shiki-light:#716E61;"> // Cached</span></span></code></pre></div><h3 id="example-traditional-pattern-opt-out" tabindex="-1">Example: Traditional Pattern (Opt-out) <a class="header-anchor" href="#example-traditional-pattern-opt-out" aria-label="Permalink to &quot;Example: Traditional Pattern (Opt-out)&quot;">​</a></h3><p>The traditional pattern where cache is enabled by default:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes kanagawa-wave kanagawa-lotus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#FFA066;--shiki-light:#CC6D00;">import </span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">{</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> setupCache</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> }</span><span style="--shiki-dark:#957FB8;--shiki-light:#624C83;"> from</span><span style="--shiki-dark:#98BB6C;--shiki-light:#6F894E;"> &#39;axios-cache-interceptor&#39;</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#727169;--shiki-light:#716E61;">// Setup axios with cache enabled by default (this is the default behavior)</span></span>
<span class="line"><span style="--shiki-dark:#957FB8;--shiki-light:#624C83;">const</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> axios </span><span style="--shiki-dark:#E6C384;--shiki-light:#77713F;">=</span><span style="--shiki-dark:#7E9CD8;--shiki-light:#4D699B;"> setupCache</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">(</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">axiosInstance</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">,</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> {</span></span>
<span class="line"><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">  enabled</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">:</span><span style="--shiki-dark:#FFA066;--shiki-light:#CC6D00;"> true</span><span style="--shiki-dark:#727169;--shiki-light:#716E61;"> // or omit this as true is the default</span></span>
<span class="line"><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#727169;--shiki-light:#716E61;">// Most requests will use cache</span></span>
<span class="line"><span style="--shiki-dark:#957FB8;--shiki-dark-font-weight:bold;--shiki-light:#624C83;--shiki-light-font-weight:bold;">await</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> axios</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">.</span><span style="--shiki-dark:#7E9CD8;--shiki-light:#4D699B;">get</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">(</span><span style="--shiki-dark:#98BB6C;--shiki-light:#6F894E;">&#39;/api/user-profile&#39;</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">);</span><span style="--shiki-dark:#727169;--shiki-light:#716E61;"> // Cached</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#727169;--shiki-light:#716E61;">// Disable cache for specific real-time endpoints</span></span>
<span class="line"><span style="--shiki-dark:#957FB8;--shiki-dark-font-weight:bold;--shiki-light:#624C83;--shiki-light-font-weight:bold;">await</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> axios</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">.</span><span style="--shiki-dark:#7E9CD8;--shiki-light:#4D699B;">get</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">(</span><span style="--shiki-dark:#98BB6C;--shiki-light:#6F894E;">&#39;/api/live-stock-prices&#39;</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">,</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> {</span></span>
<span class="line"><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">  cache</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">:</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> {</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> enabled</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">:</span><span style="--shiki-dark:#FFA066;--shiki-light:#CC6D00;"> false</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> }</span></span>
<span class="line"><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">});</span><span style="--shiki-dark:#727169;--shiki-light:#716E61;"> // Not cached</span></span></code></pre></div><h2 id="cache-ttl" tabindex="-1">cache.ttl <a class="header-anchor" href="#cache-ttl" aria-label="Permalink to &quot;cache.ttl&quot;">​</a></h2>`,11)),e(a,{text:"optional",type:"warning"}),s[4]||(s[4]=i('<ul><li>Type: <code>number</code></li><li>Default: <code>1000 * 60 * 5</code> <em>(5 Minutes)</em></li></ul><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>When using <a href="#cache-interpretheader"><strong>interpretHeader</strong></a>, this value will only be used if the interpreter can’t determine their TTL value to override this one.</p></div><p>The time until the cached value is expired in milliseconds.</p><p>If a function is used, it will receive the complete response and waits to return a TTL value</p><h2 id="cache-interpretheader" tabindex="-1">cache.interpretHeader <a class="header-anchor" href="#cache-interpretheader" aria-label="Permalink to &quot;cache.interpretHeader&quot;">​</a></h2>',5)),e(a,{text:"optional",type:"warning"}),s[5]||(s[5]=i('<ul><li>Type: <code>boolean</code></li><li>Default: <code>true</code></li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>You can override the default behavior by changing the <strong><a href="./../config#headerinterpreter">headerInterpreter</a></strong> option.</p></div><p>If activated, when the response is received, the <code>ttl</code> property will be inferred from the requests headers. As described in the MDN docs and HTML specification.</p><p>See the actual implementation of the <a href="https://github.com/arthurfiorette/axios-cache-interceptor/blob/main/src/header/interpreter.ts" target="_blank" rel="noreferrer"><code>interpretHeader</code></a> method for more information.</p><h2 id="cache-cachetakeover" tabindex="-1">cache.cacheTakeover <a class="header-anchor" href="#cache-cachetakeover" aria-label="Permalink to &quot;cache.cacheTakeover&quot;">​</a></h2>',5)),e(a,{text:"optional",type:"warning"}),s[6]||(s[6]=i('<ul><li>Type: <code>boolean</code></li><li>Default: <code>true</code></li></ul><p>As most of our cache strategies depend on well-known HTTP headers, most browsers also use those headers to define their own cache strategies and storages.</p><details class="details custom-block"><summary>This can be seen when opening network tab in your browser’s dev tools.</summary><p><img src="'+p+`" alt="Network tab in Chrome Dev Tools" title="A network disk-cache example"></p></details><p>When your requested routes include <code>Cache-Control</code> in their responses, you may end up with both the library and your browser caching the response, resulting in a <strong>double layer of cache</strong>.</p><p>This option solves this by including predefined headers in the request that instruct any client/adapter to not cache the response, thus ensuring only the library caches it.</p><p><strong>These headers are added to your specific request and won’t affect any other request or response that the server may handle.</strong></p><p>Headers included:</p><ul><li><code>Cache-Control: no-cache, no-store, must-revalidate, max-age=0</code></li><li><code>Pragma: no-cache</code></li><li><code>Expires: 0</code></li></ul><div class="info custom-block"><p class="custom-block-title">Safari Compatibility</p><p>The <code>max-age=0</code> directive was added to ensure compatibility with Safari (including iOS Safari), which has historically been more aggressive with caching and may not fully respect the <code>no-cache</code> directive alone. This combination of headers ensures reliable cache prevention across all major browsers.</p></div><div class="tip custom-block"><p class="custom-block-title">Alternative</p><p>While <code>cacheTakeover</code> works for most browsers according to <a href="https://stackoverflow.com/a/2068407" target="_blank" rel="noreferrer">this StackOverflow answer</a>, in some rare edge cases it may be unreliable due to browser-specific cache behaviors or network intermediaries.</p><p>For maximum reliability, add a unique random query parameter instead:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes kanagawa-wave kanagawa-lotus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">axios</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">.</span><span style="--shiki-dark:#7E9CD8;--shiki-light:#4D699B;">get</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">(</span></span>
<span class="line"><span style="--shiki-dark:#98BB6C;--shiki-light:#6F894E;">  \`/api/data?cachebuster=</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">\${</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">Math</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">.</span><span style="--shiki-dark:#7E9CD8;--shiki-light:#4D699B;">random</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">().</span><span style="--shiki-dark:#7E9CD8;--shiki-light:#4D699B;">toString</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">(</span><span style="--shiki-dark:#D27E99;--shiki-light:#B35B79;">36</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">).</span><span style="--shiki-dark:#7E9CD8;--shiki-light:#4D699B;">slice</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">(</span><span style="--shiki-dark:#D27E99;--shiki-light:#B35B79;">2</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">)</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">}</span><span style="--shiki-dark:#98BB6C;--shiki-light:#6F894E;">\`</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">,</span></span>
<span class="line"><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">  {</span></span>
<span class="line"><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">    id</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">:</span><span style="--shiki-dark:#98BB6C;--shiki-light:#6F894E;"> &#39;api-data-endpoint&#39;</span><span style="--shiki-dark:#727169;--shiki-light:#716E61;"> // Keep same cache key despite different URLs</span></span>
<span class="line"><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">  }</span></span>
<span class="line"><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">);</span></span></code></pre></div><p>Your backend can ignore the <code>cachebuster</code> value. This <strong>guarantees</strong> no browser caching while preserving axios-cache-interceptor functionality.</p></div><div class="warning custom-block"><p class="custom-block-title">CORS Considerations</p><p>This option will not work on <strong>CORS</strong> requests with restricted headers, as the browser will throw: <code>Request header field Pragma is not allowed by Access-Control-Allow-Headers in preflight response.</code></p><p>When you encounter CORS errors, you need to ensure <code>Cache-Control</code>, <code>Pragma</code>, and <code>Expires</code> headers are included in your server’s <code>Access-Control-Allow-Headers</code> CORS configuration.</p><p>If you cannot modify the CORS configuration, you can:</p><ol><li>Disable this option (<code>cacheTakeover: false</code>)</li><li>Use the query parameter approach mentioned above</li></ol><p>Learn more about why this should be enabled at <a href="https://github.com/arthurfiorette/axios-cache-interceptor/issues/437#issuecomment-1361262194" target="_blank" rel="noreferrer">#437</a> and in this <a href="https://stackoverflow.com/a/2068407" target="_blank" rel="noreferrer">StackOverflow answer</a>.</p></div><h2 id="cache-methods" tabindex="-1">cache.methods <a class="header-anchor" href="#cache-methods" aria-label="Permalink to &quot;cache.methods&quot;">​</a></h2>`,12)),e(a,{text:"optional",type:"warning"}),s[7]||(s[7]=i(`<ul><li>Type: <code>Method[]</code></li><li>Default: <code>[&quot;get&quot;, &quot;head&quot;]</code></li></ul><p>Specifies which methods we should handle and cache. This is where you can enable caching to <code>POST</code>, <code>PUT</code>, <code>DELETE</code> and other methods, as the default is only <code>GET</code>.</p><p>If you want to enable cache for <code>POST</code> requests, you can do:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes kanagawa-wave kanagawa-lotus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#727169;--shiki-light:#716E61;">// Globally enables caching for POST requests</span></span>
<span class="line"><span style="--shiki-dark:#957FB8;--shiki-light:#624C83;">const</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> axios </span><span style="--shiki-dark:#E6C384;--shiki-light:#77713F;">=</span><span style="--shiki-dark:#7E9CD8;--shiki-light:#4D699B;"> setupCache</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">(</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">instance</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">,</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> {</span></span>
<span class="line"><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">  methods</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">:</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> [</span><span style="--shiki-dark:#98BB6C;--shiki-light:#6F894E;">&#39;get&#39;</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">,</span><span style="--shiki-dark:#98BB6C;--shiki-light:#6F894E;"> &#39;post&#39;</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">]</span></span>
<span class="line"><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#727169;--shiki-light:#716E61;">// Just for this request</span></span>
<span class="line"><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">axios</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">.</span><span style="--shiki-dark:#7E9CD8;--shiki-light:#4D699B;">post</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">(</span><span style="--shiki-dark:#98BB6C;--shiki-light:#6F894E;">&#39;url&#39;</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">,</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> data</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">,</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> {</span></span>
<span class="line"><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">  cache</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">:</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> {</span></span>
<span class="line"><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">    methods</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">:</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> [</span><span style="--shiki-dark:#98BB6C;--shiki-light:#6F894E;">&#39;post&#39;</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">]</span></span>
<span class="line"><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">  }</span></span>
<span class="line"><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">});</span></span></code></pre></div><p>We use <code>methods</code> in a per-request configuration setup because sometimes you have exceptions to the method rule.</p><h2 id="cache-cachepredicate" tabindex="-1">cache.cachePredicate <a class="header-anchor" href="#cache-cachepredicate" aria-label="Permalink to &quot;cache.cachePredicate&quot;">​</a></h2>`,6)),e(a,{text:"optional",type:"warning"}),s[8]||(s[8]=i(`<ul><li>Type: <code>CachePredicate&lt;R, D&gt;</code></li><li>Default: <code>{ statusCheck: (status) =&gt; [200, 203, 300, 301, 302, 404, 405, 410, 414, 501].includes(status) }</code><em>(These default status codes follows RFC 7231)</em></li></ul><p>An object or function that will be tested against the response to indicate if it can be cached. You can use <code>statusCheck</code>, <code>containsHeader</code>, <code>ignoreUrls</code>, <code>allowUrls</code> and <code>responseMatch</code> to test against the response.</p><p>If both <code>ignoreUrls</code> &amp; <code>allowUrls</code> are matched, <code>ignoreUrls</code> take precedence.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes kanagawa-wave kanagawa-lotus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">axios</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">.</span><span style="--shiki-dark:#7E9CD8;--shiki-light:#4D699B;">get</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">&lt;{</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> auth</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">:</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> {</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> status</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">:</span><span style="--shiki-dark:#7AA89F;--shiki-light:#597B75;"> string</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> }</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> }&gt;(</span><span style="--shiki-dark:#98BB6C;--shiki-light:#6F894E;">&#39;url&#39;</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">,</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> {</span></span>
<span class="line"><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">  cache</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">:</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> {</span></span>
<span class="line"><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">    cachePredicate</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">:</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> {</span></span>
<span class="line"><span style="--shiki-dark:#727169;--shiki-light:#716E61;">      // Only cache if the response comes with a &quot;good&quot; status code</span></span>
<span class="line highlighted"><span style="--shiki-dark:#7E9CD8;--shiki-light:#4D699B;">      statusCheck</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">:</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> (</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">status</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">)</span><span style="--shiki-dark:#957FB8;--shiki-light:#624C83;"> =&gt;</span><span style="--shiki-dark:#FFA066;--shiki-light:#CC6D00;">  true</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">,</span><span style="--shiki-dark:#727169;--shiki-light:#716E61;"> // some calculation</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#727169;--shiki-light:#716E61;">      // Tests against any header present in the response.</span></span>
<span class="line highlighted"><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">      containsHeaders</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">:</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> {</span></span>
<span class="line"><span style="--shiki-dark:#98BB6C;--shiki-light:#6F894E;">        &#39;x-custom-header-3&#39;</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">:</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> (</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">value</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">)</span><span style="--shiki-dark:#957FB8;--shiki-light:#624C83;"> =&gt;</span><span style="--shiki-dark:#FFA066;--shiki-light:#CC6D00;"> true</span><span style="--shiki-dark:#727169;--shiki-light:#716E61;"> // some calculation</span></span>
<span class="line"><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">      },</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#727169;--shiki-light:#716E61;">      // Check custom response body</span></span>
<span class="line highlighted"><span style="--shiki-dark:#7E9CD8;--shiki-light:#4D699B;">      responseMatch</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">:</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> ({</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> data </span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">})</span><span style="--shiki-dark:#957FB8;--shiki-light:#624C83;"> =&gt;</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> {</span></span>
<span class="line"><span style="--shiki-dark:#727169;--shiki-light:#716E61;">        // Sample that only caches if the response is authenticated</span></span>
<span class="line"><span style="--shiki-dark:#957FB8;--shiki-dark-font-weight:bold;--shiki-light:#624C83;--shiki-light-font-weight:bold;">        return</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> data</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">.</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">auth</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">.</span><span style="--shiki-dark:#E6C384;--shiki-light:#77713F;">status</span><span style="--shiki-dark:#E6C384;--shiki-light:#77713F;"> ===</span><span style="--shiki-dark:#98BB6C;--shiki-light:#6F894E;"> &#39;authenticated&#39;</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">;</span></span>
<span class="line"><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">      },</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#727169;--shiki-light:#716E61;">      // Ensures no request is cached if its url starts with &quot;/api&quot;</span></span>
<span class="line"><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">      ignoreUrls</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">:</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> [</span><span style="--shiki-dark:#98BB6C;--shiki-light:#6F894E;">/</span><span style="--shiki-dark:#957FB8;--shiki-light:#624C83;">^</span><span style="--shiki-dark:#7FB4CA;--shiki-light:#6693BF;">\\/</span><span style="--shiki-dark:#C0A36E;--shiki-light:#836F4A;">api</span><span style="--shiki-dark:#98BB6C;--shiki-light:#6F894E;">/</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#727169;--shiki-light:#716E61;">      // only cache request urls that includes &quot;weekly&quot;</span></span>
<span class="line"><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">      allowUrls: </span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">[</span><span style="--shiki-dark:#98BB6C;--shiki-light:#6F894E;">&#39;weekly&#39;</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">]</span></span>
<span class="line"><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">    }</span></span>
<span class="line"><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">  }</span></span>
<span class="line"><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">});</span></span></code></pre></div><h2 id="cache-update" tabindex="-1">cache.update <a class="header-anchor" href="#cache-update" aria-label="Permalink to &quot;cache.update&quot;">​</a></h2>`,5)),e(a,{text:"optional",type:"warning"}),s[9]||(s[9]=i(`<ul><li>Type: <code>CacheUpdater&lt;R, D&gt;</code></li><li>Default: <code>{}</code></li></ul><p>Once the request is resolved, this specifies what other responses should change their cache. Can be used to update the request or delete other caches. It is a simple <code>Record</code> with the request id.</p><p>Here’s an example with some basic login:</p><p>Using a function instead of an object is supported but not recommended, as it’s better to just consume the response normally and write your own code after it. But it\`s here in case you need it.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes kanagawa-wave kanagawa-lotus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#727169;--shiki-light:#716E61;">// Some requests id&#39;s</span></span>
<span class="line"><span style="--shiki-dark:#957FB8;--shiki-light:#624C83;">let</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> profileInfoId</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">;</span></span>
<span class="line"><span style="--shiki-dark:#957FB8;--shiki-light:#624C83;">let</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> userInfoId</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">axios</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">.</span><span style="--shiki-dark:#7E9CD8;--shiki-light:#4D699B;">post</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">&lt;{</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> auth</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">:</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> {</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> user</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">:</span><span style="--shiki-dark:#7AA89F;--shiki-light:#597B75;"> User</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> }</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> }&gt;(</span></span>
<span class="line"><span style="--shiki-dark:#98BB6C;--shiki-light:#6F894E;">  &#39;login&#39;</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">,</span></span>
<span class="line"><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">  {</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> username</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">,</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> password </span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">},</span></span>
<span class="line"><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">  {</span></span>
<span class="line"><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">    cache</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">:</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> {</span></span>
<span class="line"><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">      update</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">:</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> {</span></span>
<span class="line"><span style="--shiki-dark:#727169;--shiki-light:#716E61;">        // Evicts the profile info cache, because now he is authenticated and the response needs to be re-fetched</span></span>
<span class="line"><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">        [</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">profileInfoId</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">]:</span><span style="--shiki-dark:#98BB6C;--shiki-light:#6F894E;"> &#39;delete&#39;</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">,</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#727169;--shiki-light:#716E61;">        // An example that update the &quot;user info response cache&quot; when doing a login.</span></span>
<span class="line"><span style="--shiki-dark:#727169;--shiki-light:#716E61;">        // Imagine this request is a login one.</span></span>
<span class="line"><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">        [</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">userInfoResponseId</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">]:</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> (</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">cachedValue</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">,</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> response</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">)</span><span style="--shiki-dark:#957FB8;--shiki-light:#624C83;"> =&gt;</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> {</span></span>
<span class="line"><span style="--shiki-dark:#957FB8;--shiki-dark-font-weight:bold;--shiki-light:#624C83;--shiki-light-font-weight:bold;">          if</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> (</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">cachedValue</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">.</span><span style="--shiki-dark:#E6C384;--shiki-light:#77713F;">state</span><span style="--shiki-dark:#E6C384;--shiki-light:#77713F;"> !==</span><span style="--shiki-dark:#98BB6C;--shiki-light:#6F894E;"> &#39;cached&#39;</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">)</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> {</span></span>
<span class="line"><span style="--shiki-dark:#727169;--shiki-light:#716E61;">            // Only needs to update if the response is cached</span></span>
<span class="line"><span style="--shiki-dark:#957FB8;--shiki-dark-font-weight:bold;--shiki-light:#624C83;--shiki-light-font-weight:bold;">            return</span><span style="--shiki-dark:#98BB6C;--shiki-light:#6F894E;"> &#39;ignore&#39;</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">;</span></span>
<span class="line"><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">          }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">          cachedValue</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">.</span><span style="--shiki-dark:#E6C384;--shiki-light:#77713F;">data</span><span style="--shiki-dark:#E6C384;--shiki-light:#77713F;"> =</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> data</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#727169;--shiki-light:#716E61;">          // This returned value will be returned in next calls to the cache.</span></span>
<span class="line"><span style="--shiki-dark:#957FB8;--shiki-dark-font-weight:bold;--shiki-light:#624C83;--shiki-light-font-weight:bold;">          return</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> cachedValue</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">;</span></span>
<span class="line"><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">        }</span></span>
<span class="line"><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">      }</span></span>
<span class="line"><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">    }</span></span>
<span class="line"><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">  }</span></span>
<span class="line"><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">);</span></span></code></pre></div><h2 id="cache-etag" tabindex="-1">cache.etag <a class="header-anchor" href="#cache-etag" aria-label="Permalink to &quot;cache.etag&quot;">​</a></h2>`,6)),e(a,{text:"optional",type:"warning"}),s[10]||(s[10]=i('<ul><li>Type: <code>boolean</code></li><li>Default: <code>true</code></li></ul><p>If the request should handle <a href="https://developer.mozilla.org/pt-BR/docs/Web/HTTP/Headers/ETag" target="_blank" rel="noreferrer"><code>ETag</code></a> and <a href="https://developer.mozilla.org/pt-BR/docs/Web/HTTP/Headers/If-None-Match" target="_blank" rel="noreferrer"><code>If-None-Match support</code></a>. Use a string to force a custom static value or true to use the previous response ETag.</p><p>To use <code>true</code> (automatic ETag handling), <code>interpretHeader</code> option must be set to <code>true</code>.</p><h2 id="cache-modifiedsince" tabindex="-1">cache.modifiedSince <a class="header-anchor" href="#cache-modifiedsince" aria-label="Permalink to &quot;cache.modifiedSince&quot;">​</a></h2>',4)),e(a,{text:"optional",type:"warning"}),s[11]||(s[11]=i(`<ul><li>Type: <code>boolean</code></li><li>Default: <code>true</code></li></ul><p>Use <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/If-Modified-Since" target="_blank" rel="noreferrer"><code>If-Modified-Since</code></a> header in this request. Use a date to force a custom static value or true to use the last cached timestamp.</p><p>If never cached before, the header is not set.</p><p>If <code>interpretHeader</code> is set and a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Last-Modified" target="_blank" rel="noreferrer"><code>Last-Modified</code></a> header is sent to us, then value from that header is used, otherwise cache creation timestamp will be sent in <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/If-Modified-Since" target="_blank" rel="noreferrer"><code>If-Modified-Since</code></a>.</p><h2 id="cache-staleiferror" tabindex="-1">cache.staleIfError <a class="header-anchor" href="#cache-staleiferror" aria-label="Permalink to &quot;cache.staleIfError&quot;">​</a></h2><ul><li>Type: <code>number</code> or <code>boolean</code> or <code>StaleIfErrorPredicate&lt;R, D&gt;</code></li><li>Default: <code>true</code></li></ul><p>Enables cache to be returned if the response comes with an error, either by invalid status code, network errors and etc. You can filter the type of error that should be stale by using a predicate function.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>If the response is treated as error because of invalid status code <em>(like when using <a href="#cache-cachepredicate">statusCheck</a>)</em>, and this ends up <code>true</code>, the cache will be preserved over the “invalid” request.</p><p>So, if you want to preserve the response, you can use the below predicate:</p></div><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes kanagawa-wave kanagawa-lotus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#957FB8;--shiki-light:#624C83;">const</span><span style="--shiki-dark:#7E9CD8;--shiki-light:#4D699B;"> customPredicate</span><span style="--shiki-dark:#E6C384;--shiki-light:#77713F;"> =</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> (</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">response</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">,</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> cache</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">,</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> error</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">)</span><span style="--shiki-dark:#957FB8;--shiki-light:#624C83;"> =&gt;</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> {</span></span>
<span class="line"><span style="--shiki-dark:#727169;--shiki-light:#716E61;">  // Blocks staleIfError if has a response</span></span>
<span class="line"><span style="--shiki-dark:#957FB8;--shiki-dark-font-weight:bold;--shiki-light:#624C83;--shiki-light-font-weight:bold;">  return</span><span style="--shiki-dark:#E6C384;--shiki-light:#77713F;"> !</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">response</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#727169;--shiki-light:#716E61;">  // Note that, this still respects axios default implementation</span></span>
<span class="line"><span style="--shiki-dark:#727169;--shiki-light:#716E61;">  // and throws an error, (but it keeps the response)</span></span>
<span class="line"><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">};</span></span></code></pre></div><p>Types:</p><ul><li><code>number</code> -&gt; the max time (in seconds) that the cache can be reused.</li><li><code>boolean</code> -&gt; <code>false</code> disables and <code>true</code> enables with infinite time if no value is present on <code>stale-if-error</code> in Cache-Control.</li><li><code>function</code> -&gt; a predicate that can return <code>number</code> or <code>boolean</code> as described above.</li></ul><h2 id="cache-override" tabindex="-1">cache.override <a class="header-anchor" href="#cache-override" aria-label="Permalink to &quot;cache.override&quot;">​</a></h2>`,12)),e(a,{text:"optional",type:"warning"}),s[12]||(s[12]=i('<ul><li>Type: <code>boolean</code></li><li>Default: <code>false</code></li></ul><p>This option bypasses the current cache and always make a new http request. This will not delete the current cache, it will just replace the cache when the response arrives.</p><p>Unlike as <code>cache: false</code>, this will not disable the cache, it will just ignore the pre-request cache checks before making the request. This way, all post-request options are still available and will work as expected.</p><h2 id="cache-hydrate" tabindex="-1">cache.hydrate <a class="header-anchor" href="#cache-hydrate" aria-label="Permalink to &quot;cache.hydrate&quot;">​</a></h2>',4)),e(a,{text:"optional",type:"warning"}),s[13]||(s[13]=i(`<ul><li>Type: <code>undefined | ((cache: StorageValue) =&gt; void | Promise&lt;void&gt;)</code></li><li>Default: <code>undefined</code></li></ul><p>Asynchronously called when a network request is needed to resolve the data, but an older one <strong>and probably expired</strong> cache exists. Its with the current data <strong>BEFORE</strong> the network travel starts, so you can use it to temporarily update your UI with expired data before the network returns.</p><p>Hydrating your components with old data before the network resolves with the newer one is better than <em>flickering</em> your entire UI. This is even better when dealing with slower networks and persisted cache, like for mobile apps.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>If the axios call will return cached data, meaning no network will be involved, the hydrate <strong>IS NOT CALLED</strong>, as the axios promise will be resolved instantly.</p></div><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes kanagawa-wave kanagawa-lotus vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#727169;--shiki-light:#716E61;">// Example of function that receives data and renders into a screen</span></span>
<span class="line"><span style="--shiki-dark:#957FB8;--shiki-light:#624C83;">function</span><span style="--shiki-dark:#7E9CD8;--shiki-light:#4D699B;"> render</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">()</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#957FB8;--shiki-light:#624C83;">const</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> response </span><span style="--shiki-dark:#E6C384;--shiki-light:#77713F;">=</span><span style="--shiki-dark:#957FB8;--shiki-dark-font-weight:bold;--shiki-light:#624C83;--shiki-light-font-weight:bold;"> await</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;"> axios</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">.</span><span style="--shiki-dark:#7E9CD8;--shiki-light:#4D699B;">get</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">(</span><span style="--shiki-dark:#727169;--shiki-light:#716E61;">/* [!code focus:10] */</span><span style="--shiki-dark:#98BB6C;--shiki-light:#6F894E;"> &#39;url&#39;</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">,</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> {</span></span>
<span class="line"><span style="--shiki-dark:#727169;--shiki-light:#716E61;">  // This is called instantly if axios needs to make a network request</span></span>
<span class="line"><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">  cache</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">:</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> {</span></span>
<span class="line highlighted"><span style="--shiki-dark:#7E9CD8;--shiki-light:#4D699B;">    hydrate</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">:</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;"> (</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">cache</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">)</span><span style="--shiki-dark:#957FB8;--shiki-light:#624C83;"> =&gt;</span><span style="--shiki-dark:#7E9CD8;--shiki-light:#4D699B;"> render</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">(</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">cache</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">.</span><span style="--shiki-dark:#E6C384;--shiki-light:#77713F;">data</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">)</span></span>
<span class="line"><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">  }</span></span>
<span class="line"><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#727169;--shiki-light:#716E61;">// After the network lookup ends, we have fresh data and can</span></span>
<span class="line"><span style="--shiki-dark:#727169;--shiki-light:#716E61;">// re-render the UI with confidence</span></span>
<span class="line highlighted"><span style="--shiki-dark:#7E9CD8;--shiki-light:#4D699B;">render</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">(</span><span style="--shiki-dark:#DCD7BA;--shiki-light:#545464;">response</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">.</span><span style="--shiki-dark:#E6C384;--shiki-light:#77713F;">data</span><span style="--shiki-dark:#9CABCA;--shiki-light:#4E8CA2;">);</span></span></code></pre></div>`,5))])}const u=t(k,[["render",r]]);export{y as __pageData,u as default};
